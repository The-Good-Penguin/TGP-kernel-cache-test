From 3416b10f25068b9eb736104a2500194907e3a3b4 Mon Sep 17 00:00:00 2001
From: kas User <kas@example.com>
Date: Tue, 9 Sep 2025 20:28:16 +0100
Subject: [PATCH] Update defautl env for qemu test booting

Upstream-Status: Inappropriate [oe specific]
---
 board/emulation/qemu-arm/qemu-arm.env | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/board/emulation/qemu-arm/qemu-arm.env b/board/emulation/qemu-arm/qemu-arm.env
index fb4adef281e..911b1f4b8a0 100644
--- a/board/emulation/qemu-arm/qemu-arm.env
+++ b/board/emulation/qemu-arm/qemu-arm.env
@@ -13,3 +13,5 @@ pxefile_addr_r=0x40300000
 kernel_addr_r=0x40400000
 ramdisk_addr_r=0x44000000
 boot_targets=qfw usb scsi virtio nvme dhcp
+virtioboot=virtio scan; fatload virtio 0:1 ${kernel_addr_r} Image; fatload virtio 0:1 ${fdt_addr} qemu.dtb; setenv bootargs "console=ttyAMA0 root=/dev/vda2 rw"; booti ${kernel_addr_r} - ${fdt_addr}
+bootcmd=run virtioboot
